This is the apple file.
This is master branch modification.
This is the modification in issue2